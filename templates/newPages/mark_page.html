<html>
<head>
    <title></title>
    <link rel="stylesheet" href="/static/uikit/css/uikit.min.css"/>
    <script src="/static/js/jquery.min.js"></script>
    <script src="/static/uikit/js/uikit.min.js"></script>

    <!-- Codemirror and marked dependencies -->
    <link rel="stylesheet" href="/static/codemirror/lib/codemirror.css">
    <script src="/static/codemirror/lib/codemirror.js"></script>
    <script src="/static/codemirror/mode/markdown/markdown.js"></script>
    <script src="/static/codemirror/addon/mode/overlay.js"></script>
    <script src="/static/codemirror/mode/xml/xml.js"></script>
    <script src="/static/codemirror/mode/gfm/gfm.js"></script>
    <script src="/static/js/marked/marked.min.js"></script>

    <!-- HTML editor CSS and JavaScript -->
    <link rel="stylesheet" href="/static/uikit/css/components/htmleditor.css">
    <script src="/static/uikit/js/components/htmleditor.js"></script>
</head>
<body>
<textarea data-uk-htmleditor>...</textarea>

<div id="content"><default></default></div>
<script>

    {#    var marked = require('marked');#}

    var markdownString = '```js\n console.log("hello"); \n```';

    // Async highlighting with pygmentize-bundled
    marked.setOptions({
        highlight: function (code, lang, callback) {
            require('pygmentize-bundled')({lang: lang, format: 'html'}, code, function (err, result) {
                callback(err, result.toString());
            });
        }
    });

    // Using async version of marked
marked(markdownString, function (err, content) {
  if (err) throw err;
  console.log(content);
});


    document.getElementById('content').innerHTML =
            marked(markdownString);
</script>
</body>
</html>